/*!@@version@@*/
(function(){var h=0,m=[],n={},j={},e={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},l=/[<>&\"\']/g,c,d=window.setTimeout,f={},g;function b(){this.returnValue=false}function k(){this.cancelBubble=true}(function(r){var o=r.split(/,/),p,s,q;for(p=0;p<o.length;p+=2){q=o[p+1].split(/ /);for(s=0;s<q.length;s++){j[q[s]]=o[p]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var a={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:j,ua:(function(){var t=navigator,r=t.userAgent,s=t.vendor,q,p,o;q=/WebKit/.test(r);o=q&&s.indexOf("Apple")!==-1;p=window.opera&&window.opera.buildNumber;return{windows:navigator.platform.indexOf("Win")!==-1,android:/Android/.test(r),ie:!q&&!p&&(/MSIE/gi).test(r)&&(/Explorer/gi).test(t.appName),webkit:q,gecko:!q&&/Gecko/.test(r),safari:o,opera:!!p}}()),typeOf:function(p){return({}).toString.call(p).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(o){a.each(arguments,function(p,q){if(q>0){a.each(p,function(s,r){o[r]=s})}});return o},cleanName:function(o){var p,q;q=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(p=0;p<q.length;p+=2){o=o.replace(q[p],q[p+1])}o=o.replace(/\s+/g,"_");o=o.replace(/[^a-z0-9_\-\.]+/gi,"");return o},addRuntime:function(o,p){p.name=o;m[o]=p;m.push(p);return p},guid:function(){var o=new Date().getTime().toString(32),p;for(p=0;p<5;p++){o+=Math.floor(Math.random()*65535).toString(32)}return(a.guidPrefix||"p")+o+(h++).toString(32)},buildUrl:function(p,o){var q="";a.each(o,function(s,r){q+=(q?"&":"")+encodeURIComponent(r)+"="+encodeURIComponent(s)});if(q){p+=(p.indexOf("?")>0?"&":"?")+q}return p},each:function(s,r){var o,q,p;if(s){o=s.length;if(o===c){for(q in s){if(s.hasOwnProperty(q)){if(r(s[q],q)===false){return}}}}else{for(p=0;p<o;p++){if(r(s[p],p)===false){return}}}}},formatSize:function(o){if(o===c||/\D/.test(o)){return a.translate("N/A")}if(o>1073741824){return Math.round(o/1073741824,1)+" GB"}if(o>1048576){return Math.round(o/1048576,1)+" MB"}if(o>1024){return Math.round(o/1024,1)+" KB"}return o+" b"},getPos:function(q,s){var u=0,t=0,w,v=document,r,o;q=q;s=s||v.body;function p(C){var A,B,z=0,D=0;if(C){B=C.getBoundingClientRect();A=v.compatMode==="CSS1Compat"?v.documentElement:v.body;z=B.left+A.scrollLeft;D=B.top+A.scrollTop}return{x:z,y:D}}if(q&&q.getBoundingClientRect&&a.ua.ie&&(!v.documentMode||v.documentMode<8)){r=p(q);o=p(s);return{x:r.x-o.x,y:r.y-o.y}}w=q;while(w&&w!=s&&w.nodeType){u+=w.offsetLeft||0;t+=w.offsetTop||0;w=w.offsetParent}w=q.parentNode;while(w&&w!=s&&w.nodeType){u-=w.scrollLeft||0;t-=w.scrollTop||0;w=w.parentNode}return{x:u,y:t}},getSize:function(o){return{w:o.offsetWidth||o.clientWidth,h:o.offsetHeight||o.clientHeight}},parseSize:function(o){var p;if(typeof(o)=="string"){o=/^([0-9]+)([mgk]?)$/.exec(o.toLowerCase().replace(/[^0-9mkg]/g,""));p=o[2];o=+o[1];if(p=="g"){o*=1073741824}if(p=="m"){o*=1048576}if(p=="k"){o*=1024}}return o},xmlEncode:function(o){return o?(""+o).replace(l,function(p){return e[p]?"&"+e[p]+";":p}):o},toArray:function(q){var p,o=[];for(p=0;p<q.length;p++){o[p]=q[p]}return o},inArray:function(r,q){if(q){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(q,r)}for(var p=0,o=q.length;p<o;p++){if(q[p]===r){return p}}}return -1},addI18n:function(o){return a.extend(n,o)},translate:function(o){return n[o]||o},isEmptyObj:function(o){if(o===c){return true}for(var p in o){return false}return true},hasClass:function(q,o){var p;if(q.className==""){return false}p=new RegExp("(^|\\s+)"+o+"(\\s+|$)");return p.test(q.className)},addClass:function(p,o){if(!a.hasClass(p,o)){p.className=p.className==""?o:p.className.replace(/\s+$/,"")+" "+o}},removeClass:function(q,o){var p=new RegExp("(^|\\s+)"+o+"(\\s+|$)");q.className=q.className.replace(p,function(s,r,t){return r===" "&&t===" "?" ":""})},getStyle:function(p,o){if(p.currentStyle){return p.currentStyle[o]}else{if(window.getComputedStyle){return window.getComputedStyle(p,null)[o]}}},addEvent:function(u,p,t){var s,o,r,q;q=arguments[3];p=p.toLowerCase();if(g===c){g="Plupload_"+a.guid()}if(u.addEventListener){s=t;u.addEventListener(p,s,false)}else{if(u.attachEvent){s=function(){var v=window.event;if(!v.target){v.target=v.srcElement}v.preventDefault=b;v.stopPropagation=k;t(v)};u.attachEvent("on"+p,s)}}if(u[g]===c){u[g]=a.guid()}if(!f.hasOwnProperty(u[g])){f[u[g]]={}}o=f[u[g]];if(!o.hasOwnProperty(p)){o[p]=[]}o[p].push({func:s,orig:t,key:q})},removeEvent:function(u,o){var r,t,q;if(typeof(arguments[2])=="function"){t=arguments[2]}else{q=arguments[2]}o=o.toLowerCase();if(u[g]&&f[u[g]]&&f[u[g]][o]){r=f[u[g]][o]}else{return}for(var p=r.length-1;p>=0;p--){if(r[p].key===q||r[p].orig===t){if(u.removeEventListener){u.removeEventListener(o,r[p].func,false)}else{if(u.detachEvent){u.detachEvent("on"+o,r[p].func)}}r[p].orig=null;r[p].func=null;r.splice(p,1);if(t!==c){break}}}if(!r.length){delete f[u[g]][o]}if(a.isEmptyObj(f[u[g]])){delete f[u[g]];try{delete u[g]}catch(s){u[g]=c}}},removeAllEvents:function(p){var o=arguments[1];if(p[g]===c||!p[g]){return}a.each(f[p[g]],function(r,q){a.removeEvent(p,q,o)})}};a.Uploader=function(t){var r={},v,u=[],p,s=false;v=new a.QueueProgress();t=a.extend({chunk_size:0,multipart:true,multi_selection:true,file_data_name:"file",filters:[]},t);function o(){var x,y=0,w;if(this.state==a.STARTED){for(w=0;w<u.length;w++){if(!x&&u[w].status==a.QUEUED){x=u[w];x.status=a.UPLOADING;if(this.trigger("BeforeUpload",x)){this.trigger("UploadFile",x)}}else{y++}}if(y==u.length){this.stop();this.trigger("UploadComplete",u)}}}function q(){var x,w;v.reset();for(x=0;x<u.length;x++){w=u[x];if(w.size!==c){v.size+=w.size;v.loaded+=w.loaded}else{v.size=c}if(w.status==a.DONE){v.uploaded++}else{if(w.status==a.FAILED){v.failed++}else{v.queued++}}}if(v.size===c){v.percent=u.length>0?Math.ceil(v.uploaded/u.length*100):0}else{v.bytesPerSec=Math.ceil(v.loaded/((+new Date()-p||1)/1000));v.percent=v.size>0?Math.ceil(v.loaded/v.size*100):0}}a.extend(this,{state:a.STOPPED,runtime:"",features:{},files:u,settings:t,total:v,id:a.guid(),init:function(){var A=this,B,y,x,C=0,z;if(typeof(t.preinit)=="function"){t.preinit(A)}else{a.each(t.preinit,function(E,D){A.bind(D,E)})}t.page_url=t.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(t.url)){t.url=t.page_url+t.url}t.chunk_size=a.parseSize(t.chunk_size);t.max_file_size=a.parseSize(t.max_file_size);A.bind("FilesAdded",function(D,F){var H,G,I=0,J,E=t.filters;if(E&&E.length){J=[];a.each(E,function(K){a.each(K.extensions.split(/,/),function(L){if(/^\s*\*\s*$/.test(L)){J.push("\\.*")}else{J.push("\\."+L.replace(new RegExp("["+("/^$.*+?|()[]{}\\".replace(/./g,"\\$&"))+"]","g"),"\\$&"))}})});J=new RegExp(J.join("|")+"$","i")}for(H=0;H<F.length;H++){G=F[H];G.loaded=0;G.percent=0;G.status=a.QUEUED;if(J&&!J.test(G.name)){D.trigger("Error",{code:a.FILE_EXTENSION_ERROR,message:a.translate("File extension error."),file:G});continue}if(G.size!==c&&G.size>t.max_file_size){D.trigger("Error",{code:a.FILE_SIZE_ERROR,message:a.translate("File size error."),file:G});continue}u.push(G);I++}if(I){d(function(){A.trigger("QueueChanged");A.refresh()},1)}else{return false}});if(t.unique_names){A.bind("UploadFile",function(D,E){var G=E.name.match(/\.([^.]+)$/),F="tmp";if(G){F=G[1]}E.target_name=E.id+"."+F})}A.bind("UploadProgress",function(D,E){E.percent=E.size>0?Math.ceil(E.loaded/E.size*100):100;q()});A.bind("StateChanged",function(D){if(D.state==a.STARTED){p=(+new Date())}else{if(D.state==a.STOPPED){for(B=D.files.length-1;B>=0;B--){if(D.files[B].status==a.UPLOADING){D.files[B].status=a.QUEUED;q()}}}}});A.bind("QueueChanged",q);A.bind("Error",function(D,E){if(E.file){E.file.status=a.FAILED;q();if(D.state==a.STARTED){d(function(){o.call(A)},1)}}});A.bind("FileUploaded",function(D,E){E.status=a.DONE;E.loaded=E.size;D.trigger("UploadProgress",E);d(function(){o.call(A)},1)});if(t.runtimes){y=[];z=t.runtimes.split(/\s?,\s?/);for(B=0;B<z.length;B++){if(m[z[B]]){y.push(m[z[B]])}}}else{y=m}function w(){var G=y[C++],E,D,F;if(G){E=G.getFeatures();D=A.settings.required_features;if(D){D=D.split(",");for(F=0;F<D.length;F++){if(!E[D[F]]){w();return}}}G.init(A,function(H){if(H&&H.success){A.features=E;A.runtime=G.name;A.trigger("Init",{runtime:G.name});A.trigger("PostInit");A.refresh()}else{w()}})}else{A.trigger("Error",{code:a.INIT_ERROR,message:a.translate("Init error.")})}}w();if(typeof(t.init)=="function"){t.init(A)}else{a.each(t.init,function(E,D){A.bind(D,E)})}},refresh:function(){this.trigger("Refresh")},start:function(){if(u.length&&this.state!=a.STARTED){this.state=a.STARTED;this.trigger("StateChanged");o.call(this)}},stop:function(){if(this.state!=a.STOPPED){this.state=a.STOPPED;this.trigger("CancelUpload");this.trigger("StateChanged")}},disableBrowse:function(){s=arguments[0]!==c?arguments[0]:true;this.trigger("DisableBrowse",s)},getFile:function(x){var w;for(w=u.length-1;w>=0;w--){if(u[w].id===x){return u[w]}}},removeFile:function(x){var w;for(w=u.length-1;w>=0;w--){if(u[w].id===x.id){return this.splice(w,1)[0]}}},splice:function(y,w){var x;x=u.splice(y===c?0:y,w===c?u.length:w);this.trigger("FilesRemoved",x);this.trigger("QueueChanged");return x},trigger:function(x){var z=r[x.toLowerCase()],y,w;if(z){w=Array.prototype.slice.call(arguments);w[0]=this;for(y=0;y<z.length;y++){if(z[y].func.apply(z[y].scope,w)===false){return false}}}return true},hasEventListener:function(w){return !!r[w.toLowerCase()]},bind:function(w,y,x){var z;w=w.toLowerCase();z=r[w]||[];z.push({func:y,scope:x||this});r[w]=z},unbind:function(w){w=w.toLowerCase();var z=r[w],x,y=arguments[1];if(z){if(y!==c){for(x=z.length-1;x>=0;x--){if(z[x].func===y){z.splice(x,1);break}}}else{z=[]}if(!z.length){delete r[w]}}},unbindAll:function(){var w=this;a.each(r,function(y,x){w.unbind(x)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})};a.File=function(r,p,q){var o=this;o.id=r;o.name=p;o.size=q;o.loaded=0;o.percent=0;o.status=0};a.Runtime=function(){this.getFeatures=function(){};this.init=function(p,o){}};a.QueueProgress=function(){var o=this;o.size=0;o.loaded=0;o.uploaded=0;o.failed=0;o.queued=0;o.percent=0;o.bytesPerSec=0;o.reset=function(){o.size=o.loaded=o.uploaded=o.failed=o.queued=o.percent=o.bytesPerSec=0}};a.runtimes={};window.plupload=a})();(function(b,m,d,h){var e={},k;function c(s){var r=s.naturalWidth,u=s.naturalHeight;if(r*u>1024*1024){var t=m.createElement("canvas");t.width=t.height=1;var q=t.getContext("2d");q.drawImage(s,-r+1,0);return q.getImageData(0,0,1,1).data[3]===0}else{return false}}function g(s,q,A){var u=m.createElement("canvas");u.width=1;u.height=A;var z=u.getContext("2d");z.drawImage(s,0,0);var t=z.getImageData(0,0,1,A).data;var x=0;var v=A;var y=A;while(y>x){var r=t[(y-1)*4+3];if(r===0){v=y}else{x=y}y=(v+x)>>1}var w=(y/A);return(w===0)?1:w}function p(K,u,s){var r=K.naturalWidth,z=K.naturalHeight;var D=s.width,J=s.height;var E=u.getContext("2d");E.save();var v=c(K);if(v){r/=2;z/=2}var H=1024;var q=m.createElement("canvas");q.width=q.height=H;var t=q.getContext("2d");var G=g(K,r,z);var A=0;while(A<z){var I=A+H>z?z-A:H;var B=0;while(B<r){var C=B+H>r?r-B:H;t.clearRect(0,0,H,H);t.drawImage(K,-B,-A);var x=(B*D/r)<<0;var y=Math.ceil(C*D/r);var w=(A*J/z/G)<<0;var F=Math.ceil(I*J/z/G);E.drawImage(q,0,0,C,I,x,w,y,F);B+=H}A+=H}E.restore();q=t=null}function n(q,s){var r;if("FileReader" in b){r=new FileReader();r.readAsDataURL(q);r.onload=function(){s(r.result)}}else{return s(q.getAsDataURL())}}function o(q,s){var r;if("FileReader" in b){r=new FileReader();r.readAsBinaryString(q);r.onload=function(){s(r.result)}}else{return s(q.getAsBinary())}}function f(s,x,q,y){var w,r,v,t,u=this;n(e[s.id],function(z){w=m.createElement("canvas");w.style.display="none";m.body.appendChild(w);v=new Image();v.onerror=v.onabort=function(){y({success:false})};v.onload=function(){var D,F,E,A,C;if(!x.width){x.width=v.width}if(!x.height){x.height=v.height}t=Math.min(x.width/v.width,x.height/v.height);if(t<1){D=Math.round(v.width*t);F=Math.round(v.height*t)}else{if(x.quality&&q==="image/jpeg"){D=v.width;F=v.height}else{y({success:false});return}}w.width=D;w.height=F;p(v,w,{width:D,height:F});if(q==="image/jpeg"){A=new j(atob(z.substring(z.indexOf("base64,")+7)));if(A.headers&&A.headers.length){C=new l();if(C.init(A.get("exif")[0])){C.setExif("PixelXDimension",D);C.setExif("PixelYDimension",F);A.set("exif",C.getBinary());if(u.hasEventListener("ExifData")){u.trigger("ExifData",s,C.EXIF())}if(u.hasEventListener("GpsData")){u.trigger("GpsData",s,C.GPS())}}}}if(x.quality&&q==="image/jpeg"){try{z=w.toDataURL(q,x.quality/100)}catch(B){z=w.toDataURL(q)}}else{z=w.toDataURL(q)}z=z.substring(z.indexOf("base64,")+7);z=atob(z);if(A&&A.headers&&A.headers.length){z=A.restore(z);A.purge()}w.parentNode.removeChild(w);y({success:true,data:z})};v.src=z})}d.runtimes.Html5=d.addRuntime("html5",{getFeatures:function(){var u,q,t,v,r,s;q=t=r=s=false;if(b.XMLHttpRequest){u=new XMLHttpRequest();t=!!u.upload;q=!!(u.sendAsBinary||u.upload)}if(q){v=!!(u.sendAsBinary||(b.Uint8Array&&b.ArrayBuffer));r=!!(File&&(File.prototype.getAsDataURL||b.FileReader)&&v);s=!!(File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))}k=d.ua.safari&&d.ua.windows;return{html5:q,dragdrop:(function(){var w=m.createElement("div");return("draggable" in w)||("ondragstart" in w&&"ondrop" in w)}()),jpgresize:r,pngresize:r,multipart:r||!!b.FileReader||!!b.FormData,canSendBinary:v,cantSendBlobInFormData:!!(d.ua.gecko&&b.FormData&&b.FileReader&&!FileReader.prototype.readAsArrayBuffer)||d.ua.android,progress:t,chunks:s,multi_selection:!(d.ua.safari&&d.ua.windows),triggerDialog:(d.ua.gecko&&b.FormData||d.ua.webkit)}},init:function(t,s){var q,u;function r(v){var x,w,z=[],A,y={};for(w=0;w<v.length;w++){x=v[w];if(y[x.name]&&d.ua.safari&&d.ua.windows){continue}y[x.name]=true;A=d.guid();e[A]=x;z.push(new d.File(A,x.fileName||x.name,x.fileSize||x.size))}if(z.length){t.trigger("FilesAdded",z)}}q=this.getFeatures();if(!q.html5){s({success:false});return}t.bind("Init",function(x){var H,K,G=[],z,I,C=x.settings.filters,w,F,E=m.body,J;H=m.createElement("div");H.id=x.id+"_html5_container";d.extend(H.style,{position:"absolute",background:t.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:t.settings.shim_bgcolor?"":0});H.className="plupload html5";if(t.settings.container){E=m.getElementById(t.settings.container);if(d.getStyle(E,"position")==="static"){E.style.position="relative"}}E.appendChild(H);no_type_restriction:for(z=0;z<C.length;z++){w=C[z].extensions.split(/,/);for(I=0;I<w.length;I++){if(w[I]==="*"){G=[];break no_type_restriction}F=d.mimeTypes[w[I]];if(F&&d.inArray(F,G)===-1){G.push(F)}}}H.innerHTML='<input id="'+t.id+'_html5"  style="font-size:999px" type="file" accept="'+G.join(",")+'" '+(t.settings.multi_selection&&t.features.multi_selection?'multiple="multiple"':"")+" />";H.scrollTop=100;J=m.getElementById(t.id+"_html5");if(x.features.triggerDialog){d.extend(J.style,{position:"absolute",width:"100%",height:"100%"})}else{d.extend(J.style,{cssFloat:"right",styleFloat:"right"})}J.onchange=function D(){r(this.files);if(!d.ua.ie){this.value=""}else{var y=this.cloneNode(true);this.parentNode.replaceChild(y,this);y.onchange=D;y=null}};K=m.getElementById(x.settings.browse_button);if(K){var B=x.settings.browse_button_hover,v=x.settings.browse_button_active,A=x.features.triggerDialog?K:H;if(B){d.addEvent(A,"mouseover",function(){d.addClass(K,B)},x.id);d.addEvent(A,"mouseout",function(){d.removeClass(K,B)},x.id)}if(v){d.addEvent(A,"mousedown",function(){d.addClass(K,v)},x.id);d.addEvent(m.body,"mouseup",function(){d.removeClass(K,v)},x.id)}if(x.features.triggerDialog){d.addEvent(K,"click",function(L){var y=m.getElementById(x.id+"_html5");if(y&&!y.disabled){y.click()}L.preventDefault()},x.id)}}});t.bind("PostInit",function(){var v=m.getElementById(t.settings.drop_element);if(v){if(k){d.addEvent(v,"dragenter",function(z){var y,w,x;y=m.getElementById(t.id+"_drop");if(!y){y=m.createElement("input");y.setAttribute("type","file");y.setAttribute("id",t.id+"_drop");y.setAttribute("multiple","multiple");d.addEvent(y,"change",function(){r(this.files);d.removeEvent(y,"change",t.id);y.parentNode.removeChild(y)},t.id);d.addEvent(y,"dragover",function(A){A.stopPropagation()},t.id);v.appendChild(y)}w=d.getPos(v,m.getElementById(t.settings.container));x=d.getSize(v);if(d.getStyle(v,"position")==="static"){d.extend(v.style,{position:"relative"})}d.extend(y.style,{position:"absolute",display:"block",top:0,left:0,width:x.w+"px",height:x.h+"px",opacity:0})},t.id);return}d.addEvent(v,"dragover",function(w){w.preventDefault()},t.id);d.addEvent(v,"drop",function(x){var w=x.dataTransfer;if(w&&w.files){r(w.files)}x.preventDefault()},t.id)}});t.bind("Refresh",function(w){var x,v,A,z,y;x=m.getElementById(t.settings.browse_button);if(x){v=d.getPos(x,m.getElementById(w.settings.container));A=d.getSize(x);z=m.getElementById(t.id+"_html5_container");d.extend(z.style,{top:v.y+"px",left:v.x+"px",width:A.w+"px",height:A.h+"px"});if(t.features.triggerDialog){if(d.getStyle(x,"position")==="static"){d.extend(x.style,{position:"relative"})}y=parseInt(d.getStyle(x,"zIndex"),10);if(isNaN(y)){y=0}d.extend(x.style,{zIndex:y});d.extend(z.style,{zIndex:y-1})}}});t.bind("DisableBrowse",function(v,x){var w=m.getElementById(v.id+"_html5");if(w){w.disabled=x}});t.bind("CancelUpload",function(){if(u&&u.abort){u.abort()}});t.bind("UploadFile",function(v,x){var y=v.settings,B,w;function A(D,G,C){var E;if(File.prototype.slice){try{D.slice();return D.slice(G,C)}catch(F){return D.slice(G,C-G)}}else{if(E=File.prototype.webkitSlice||File.prototype.mozSlice){return E.call(D,G,C)}else{return null}}}function z(C){var E=0,F=0;function D(){var K,P,H=1,O,J,I,N,G=v.settings.url;function L(S){if(u.sendAsBinary){u.sendAsBinary(S)}else{if(v.features.canSendBinary){var Q=new Uint8Array(S.length);for(var R=0;R<S.length;R++){Q[R]=(S.charCodeAt(R)&255)}u.send(Q.buffer)}}}function M(R){var W=0,U="----pluploadboundary"+d.guid(),T,S="--",V="\r\n",Q="";u=new XMLHttpRequest;if(u.upload){u.upload.onprogress=function(X){x.loaded=Math.min(x.size,F+X.loaded-W);v.trigger("UploadProgress",x)}}u.onreadystatechange=function(){var X,Z;if(u.readyState==4&&v.state!==d.STOPPED){try{X=u.status}catch(Y){X=0}if(X>=400){v.trigger("Error",{code:d.HTTP_ERROR,message:d.translate("HTTP Error."),file:x,status:X,response:u.responseText})}else{if(H){Z={chunk:E,chunks:H,response:u.responseText,status:X};v.trigger("ChunkUploaded",x,Z);F+=I;if(Z.cancelled){x.status=d.FAILED;return}x.loaded=Math.min(x.size,(E+1)*J)}else{x.loaded=x.size}v.trigger("UploadProgress",x);R=K=T=Q=null;if(!H||++E>=H){x.status=d.DONE;v.trigger("FileUploaded",x,{response:u.responseText,status:X})}else{D()}}}};if(v.settings.multipart&&q.multipart){O.name=x.target_name||x.name;u.open("post",G,true);d.each(v.settings.headers,function(Y,X){u.setRequestHeader(X,Y)});if(typeof(R)!=="string"&&!!b.FormData){T=new FormData();d.each(d.extend(O,v.settings.multipart_params),function(Y,X){T.append(X,Y)});T.append(v.settings.file_data_name,R);u.send(T);return}if(typeof(R)==="string"){u.setRequestHeader("Content-Type","multipart/form-data; boundary="+U);d.each(d.extend(O,v.settings.multipart_params),function(Y,X){Q+=S+U+V+'Content-Disposition: form-data; name="'+X+'"'+V+V;Q+=unescape(encodeURIComponent(Y))+V});N=d.mimeTypes[x.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";Q+=S+U+V+'Content-Disposition: form-data; name="'+v.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(x.name))+'"'+V+"Content-Type: "+N+V+V+R+V+S+U+S+V;W=Q.length-R.length;R=Q;L(R);return}}G=d.buildUrl(v.settings.url,d.extend(O,v.settings.multipart_params));u.open("post",G,true);u.setRequestHeader("Content-Type","application/octet-stream");d.each(v.settings.headers,function(Y,X){u.setRequestHeader(X,Y)});if(typeof(R)==="string"){L(R)}else{u.send(R)}}if(x.status==d.DONE||x.status==d.FAILED||v.state==d.STOPPED){return}O={name:x.target_name||x.name};if(y.chunk_size&&x.size>y.chunk_size&&(q.chunks||typeof(C)=="string")){J=y.chunk_size;H=Math.ceil(x.size/J);I=Math.min(J,x.size-(E*J));if(typeof(C)=="string"){K=C.substring(E*J,E*J+I)}else{K=A(C,E*J,E*J+I)}}else{I=x.size;K=C}if(y.chunk_size&&q.chunks){O.chunk=E;O.chunks=H}if(v.settings.multipart&&q.multipart&&typeof(K)!=="string"&&b.FileReader&&q.cantSendBlobInFormData&&q.chunks&&v.settings.chunk_size){(function(){var Q=new FileReader();Q.onload=function(){M(Q.result);Q=null};Q.readAsBinaryString(K)}())}else{M(K)}}D()}B=e[x.id];if(q.jpgresize&&v.settings.resize&&/\.(png|jpg|jpeg)$/i.test(x.name)){f.call(v,x,v.settings.resize,/\.png$/i.test(x.name)?"image/png":"image/jpeg",function(C){if(C.success){x.size=C.data.length;z(C.data)}else{if(q.chunks){z(B)}else{o(B,z)}}})}else{if(!q.chunks&&q.jpgresize){o(B,z)}else{z(B)}}});t.bind("Destroy",function(w){var y,x,z=m.body,v={inputContainer:w.id+"_html5_container",inputFile:w.id+"_html5",browseButton:w.settings.browse_button,dropElm:w.settings.drop_element};for(y in v){x=m.getElementById(v[y]);if(x){d.removeAllEvents(x,w.id)}}d.removeAllEvents(m.body,w.id);if(w.settings.container){z=m.getElementById(w.settings.container)}z.removeChild(m.getElementById(v.inputContainer))});s({success:true})}});function a(){var s=false,q;function u(w,y){var v=s?0:-8*(y-1),z=0,x;for(x=0;x<y;x++){z|=(q.charCodeAt(w+x)<<Math.abs(v+x*8))}return z}function t(x,v,w){var w=arguments.length===3?w:q.length-v-1;q=q.substr(0,v)+x+q.substr(w+v)}function r(w,x,z){var A="",v=s?0:-8*(z-1),y;for(y=0;y<z;y++){A+=String.fromCharCode((x>>Math.abs(v+y*8))&255)}t(A,w,z)}return{II:function(v){if(v===h){return s}else{s=v}},init:function(v){s=false;q=v},SEGMENT:function(v,w,x){switch(arguments.length){case 1:return q.substr(v,q.length-v-1);case 2:return q.substr(v,w);case 3:t(x,v,w);break;default:return q}},BYTE:function(v){return u(v,1)},SHORT:function(v){return u(v,2)},LONG:function(v,w){if(w===h){return u(v,4)}else{r(v,w,4)}},SLONG:function(v){var w=u(v,4);return(w>2147483647?w-4294967296:w)},STRING:function(v,w){var x="";for(w+=v;v<w;v++){x+=String.fromCharCode(u(v,1))}return x}}}function j(v){var x={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},w=[],u,q,t=h,s=0,r;u=new a();u.init(v);if(u.SHORT(0)!==65496){return}q=2;r=Math.min(1048576,v.length);while(q<=r){t=u.SHORT(q);if(t>=65488&&t<=65495){q+=2;continue}if(t===65498||t===65497){break}s=u.SHORT(q+2)+2;if(x[t]&&u.STRING(q+4,x[t].signature.length)===x[t].signature){w.push({hex:t,app:x[t].app.toUpperCase(),name:x[t].name.toUpperCase(),start:q,length:s,segment:u.SEGMENT(q,s)})}q+=s}u.init(null);return{headers:w,restore:function(B){u.init(B);var z=new j(B);if(!z.headers){return false}for(var A=z.headers.length;A>0;A--){var C=z.headers[A-1];u.SEGMENT(C.start,C.length,"")}z.purge();q=u.SHORT(2)==65504?4+u.SHORT(4):2;for(var A=0,y=w.length;A<y;A++){u.SEGMENT(q,0,w[A].segment);q+=w[A].length}return u.SEGMENT()},get:function(A){var B=[];for(var z=0,y=w.length;z<y;z++){if(w[z].app===A.toUpperCase()){B.push(w[z].segment)}}return B},set:function(B,A){var C=[];if(typeof(A)==="string"){C.push(A)}else{C=A}for(var z=ii=0,y=w.length;z<y;z++){if(w[z].app===B.toUpperCase()){w[z].segment=C[ii];w[z].length=C[ii].length;ii++}if(ii>=C.length){break}}},purge:function(){w=[];u.init(null)}}}function l(){var t,r,q={},u;t=new a();r={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};u={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};function s(x,I){var C=t.SHORT(x),B,H,J,E,D,y,z,F,G=[],A={};for(B=0;B<C;B++){z=y=x+12*B+2;J=I[t.SHORT(z)];if(J===h){continue}E=t.SHORT(z+=2);D=t.LONG(z+=2);z+=4;G=[];switch(E){case 1:case 7:if(D>4){z=t.LONG(z)+q.tiffHeader}for(H=0;H<D;H++){G[H]=t.BYTE(z+H)}break;case 2:if(D>4){z=t.LONG(z)+q.tiffHeader}A[J]=t.STRING(z,D-1);continue;case 3:if(D>2){z=t.LONG(z)+q.tiffHeader}for(H=0;H<D;H++){G[H]=t.SHORT(z+H*2)}break;case 4:if(D>1){z=t.LONG(z)+q.tiffHeader}for(H=0;H<D;H++){G[H]=t.LONG(z+H*4)}break;case 5:z=t.LONG(z)+q.tiffHeader;for(H=0;H<D;H++){G[H]=t.LONG(z+H*4)/t.LONG(z+H*4+4)}break;case 9:z=t.LONG(z)+q.tiffHeader;for(H=0;H<D;H++){G[H]=t.SLONG(z+H*4)}break;case 10:z=t.LONG(z)+q.tiffHeader;for(H=0;H<D;H++){G[H]=t.SLONG(z+H*4)/t.SLONG(z+H*4+4)}break;default:continue}F=(D==1?G[0]:G);if(u.hasOwnProperty(J)&&typeof F!="object"){A[J]=u[J][F]}else{A[J]=F}}return A}function w(){var y=h,x=q.tiffHeader;t.II(t.SHORT(x)==18761);if(t.SHORT(x+=2)!==42){return false}q.IFD0=q.tiffHeader+t.LONG(x+=2);y=s(q.IFD0,r.tiff);q.exifIFD=("ExifIFDPointer" in y?q.tiffHeader+y.ExifIFDPointer:h);q.gpsIFD=("GPSInfoIFDPointer" in y?q.tiffHeader+y.GPSInfoIFDPointer:h);return true}function v(z,x,C){var E,y,B,D=0;if(typeof(x)==="string"){var A=r[z.toLowerCase()];for(hex in A){if(A[hex]===x){x=hex;break}}}E=q[z.toLowerCase()+"IFD"];y=t.SHORT(E);for(i=0;i<y;i++){B=E+12*i+2;if(t.SHORT(B)==x){D=B+8;break}}if(!D){return false}t.LONG(D,C);return true}return{init:function(x){q={tiffHeader:10};if(x===h||!x.length){return false}t.init(x);if(t.SHORT(0)===65505&&t.STRING(4,5).toUpperCase()==="EXIF\0"){return w()}return false},EXIF:function(){var x;x=s(q.exifIFD,r.exif);if(x.ExifVersion&&d.typeOf(x.ExifVersion)==="array"){for(var y=0,z="";y<x.ExifVersion.length;y++){z+=String.fromCharCode(x.ExifVersion[y])}x.ExifVersion=z}return x},GPS:function(){var x;x=s(q.gpsIFD,r.gps);if(x.GPSVersionID){x.GPSVersionID=x.GPSVersionID.join(".")}return x},setExif:function(x,y){if(x!=="PixelXDimension"&&x!=="PixelYDimension"){return false}return v("exif",x,y)},getBinary:function(){return t.SEGMENT()}}}})(window,document,plupload);(function(b,a,c,d){function e(f){return a.getElementById(f)}c.runtimes.Html4=c.addRuntime("html4",{getFeatures:function(){return{multipart:true,triggerDialog:(c.ua.gecko&&b.FormData||c.ua.webkit)}},init:function(g,f){g.bind("Init",function(n){var r=a.body,l,h="javascript",j,x,o,z=[],q=/MSIE/.test(navigator.userAgent),t=[],p=n.settings.filters,m,k,s,w;no_type_restriction:for(m=0;m<p.length;m++){k=p[m].extensions.split(/,/);for(w=0;w<k.length;w++){if(k[w]==="*"){t=[];break no_type_restriction}s=c.mimeTypes[k[w]];if(s&&c.inArray(s,t)===-1){t.push(s)}}}t=t.join(",");function v(){var C,y,B,A;o=c.guid();z.push(o);C=a.createElement("form");C.setAttribute("id","form_"+o);C.setAttribute("method","post");C.setAttribute("enctype","multipart/form-data");C.setAttribute("encoding","multipart/form-data");C.setAttribute("target",n.id+"_iframe");C.style.position="absolute";y=a.createElement("input");y.setAttribute("id","input_"+o);y.setAttribute("type","file");y.setAttribute("accept",t);y.setAttribute("size",1);A=e(n.settings.browse_button);if(n.features.triggerDialog&&A){c.addEvent(e(n.settings.browse_button),"click",function(D){if(!y.disabled){y.click()}D.preventDefault()},n.id)}c.extend(y.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"});c.extend(C.style,{overflow:"hidden"});B=n.settings.shim_bgcolor;if(B){C.style.background=B}if(q){c.extend(y.style,{filter:"alpha(opacity=0)"})}c.addEvent(y,"change",function(G){var E=G.target,D,F=[],H;if(E.value){e("form_"+o).style.top=-1048575+"px";D=E.value.replace(/\\/g,"/");D=D.substring(D.length,D.lastIndexOf("/")+1);F.push(new c.File(o,D));if(!n.features.triggerDialog){c.removeAllEvents(C,n.id)}else{c.removeEvent(A,"click",n.id)}c.removeEvent(y,"change",n.id);v();if(F.length){g.trigger("FilesAdded",F)}}},n.id);C.appendChild(y);r.appendChild(C);n.refresh()}function u(){var y=a.createElement("div");y.innerHTML='<iframe id="'+n.id+'_iframe" name="'+n.id+'_iframe" src="'+h+':&quot;&quot;" style="display:none"></iframe>';l=y.firstChild;r.appendChild(l);c.addEvent(l,"load",function(D){var E=D.target,B,C;if(!j){return}try{B=E.contentWindow.document||E.contentDocument||b.frames[E.id].document}catch(A){n.trigger("Error",{code:c.SECURITY_ERROR,message:c.translate("Security error."),file:j});return}C=B.documentElement.innerText||B.documentElement.textContent;if(C){j.status=c.DONE;j.loaded=1025;j.percent=100;n.trigger("UploadProgress",j);n.trigger("FileUploaded",j,{response:C})}},n.id)}if(n.settings.container){r=e(n.settings.container);if(c.getStyle(r,"position")==="static"){r.style.position="relative"}}n.bind("UploadFile",function(y,B){var C,A;if(B.status==c.DONE||B.status==c.FAILED||y.state==c.STOPPED){return}C=e("form_"+B.id);A=e("input_"+B.id);A.setAttribute("name",y.settings.file_data_name);C.setAttribute("action",y.settings.url);c.each(c.extend({name:B.target_name||B.name},y.settings.multipart_params),function(F,E){var D=a.createElement("input");c.extend(D,{type:"hidden",name:E,value:F});C.insertBefore(D,C.firstChild)});j=B;e("form_"+o).style.top=-1048575+"px";C.submit()});n.bind("FileUploaded",function(y){y.refresh()});n.bind("StateChanged",function(y){if(y.state==c.STARTED){u()}else{if(y.state==c.STOPPED){b.setTimeout(function(){c.removeEvent(l,"load",y.id);if(l.parentNode){l.parentNode.removeChild(l)}},0)}}c.each(y.files,function(B,A){if(B.status===c.DONE||B.status===c.FAILED){var C=e("form_"+B.id);if(C){C.parentNode.removeChild(C)}}})});n.bind("Refresh",function(A){var H,B,C,y,D,G,E,F,I;H=e(A.settings.browse_button);if(H){D=c.getPos(H,e(A.settings.container));G=c.getSize(H);E=e("form_"+o);F=e("input_"+o);c.extend(E.style,{top:D.y+"px",left:D.x+"px",width:G.w+"px",height:G.h+"px"});if(A.features.triggerDialog){if(c.getStyle(H,"position")==="static"){c.extend(H.style,{position:"relative"})}I=parseInt(H.style.zIndex,10);if(isNaN(I)){I=0}c.extend(H.style,{zIndex:I});c.extend(E.style,{zIndex:I-1})}C=A.settings.browse_button_hover;y=A.settings.browse_button_active;B=A.features.triggerDialog?H:E;if(C){c.addEvent(B,"mouseover",function(){c.addClass(H,C)},A.id);c.addEvent(B,"mouseout",function(){c.removeClass(H,C)},A.id)}if(y){c.addEvent(B,"mousedown",function(){c.addClass(H,y)},A.id);c.addEvent(a.body,"mouseup",function(){c.removeClass(H,y)},A.id)}}});g.bind("FilesRemoved",function(y,B){var A,C;for(A=0;A<B.length;A++){C=e("form_"+B[A].id);if(C){C.parentNode.removeChild(C)}}});g.bind("DisableBrowse",function(y,B){var A=a.getElementById("input_"+o);if(A){A.disabled=B}});g.bind("Destroy",function(A){var C,B,D,y={inputContainer:"form_"+o,inputFile:"input_"+o,browseButton:A.settings.browse_button};for(C in y){B=e(y[C]);if(B){c.removeAllEvents(B,A.id)}}c.removeAllEvents(a.body,A.id);c.each(z,function(F,E){D=e("form_"+F);if(D){D.parentNode.removeChild(D)}})});v()});f({success:true})}})})(window,document,plupload);